<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="UTF-8"><meta name="description" content="美股投资实操手册I - 高倍股分析与策略实践"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.10.1"><title></title><link rel="stylesheet" href="/_astro/000_序言.DpT400HY.css"></head> <body> <div class="container"> <!-- 左上角 --> <header class="top-nav"> <div style="display: flex; align-items: center;"> <button class="sidebar-toggle" id="sidebarToggle" aria-label="切换侧边栏">📚</button> </div> <div class="right-buttons"> <button id="toggleReadingMode" class="reading-btn" title="专注阅读模式">📖</button> <button class="theme-toggle" id="themeToggle" aria-label="切换主题"> <span class="theme-icon">🌙</span> </button> <button id="decreaseFont" class="font-btn" title="缩小字体">A-</button> <button id="increaseFont" class="font-btn" title="放大字体">A+</button> <a class="lang-btn" id="langSwitchEn" title="English">EN</a> <a class="lang-btn" id="langSwitchCn" title="中文">CN</a> </div> </header> <!-- 侧边栏 --> <aside class="sidebar" id="sidebar"> <div class="sidebar-header"> <h2>📈 美股投资实操手册I</h2> </div> <nav class="sidebar-nav"> <a href="/" class="nav-item"> <span class="chapter-number">🏠</span> <span class="chapter-title">首页</span> </a> <a href="/000_序言" class="nav-item"> <span class="chapter-number">📖</span> <span class="chapter-title">序言</span> </a> <a href="/001_第一章：看清自己，看懂世界——投资的认知起点" class="nav-item"> <span class="chapter-number">1️⃣</span> <span class="chapter-title">第一章：投资认知起点</span> </a> <a href="/002_第二章：投资心理与风险管理" class="nav-item"> <span class="chapter-number">2️⃣</span> <span class="chapter-title">第二章：投资心理与风险管理</span> </a> <a href="/003_第三章：历史规律与高倍股研究" class="nav-item"> <span class="chapter-number">3️⃣</span> <span class="chapter-title">第三章：历史规律与高倍股研究</span> </a> <a href="/004_第四章：赛道选择与行业趋势" class="nav-item"> <span class="chapter-number">4️⃣</span> <span class="chapter-title">第四章：赛道选择与行业趋势</span> </a> <a href="/005_第五章：股票筛选策略" class="nav-item"> <span class="chapter-number">5️⃣</span> <span class="chapter-title">第五章：股票筛选策略</span> </a> <a href="/006_第六章：交易策略与执行" class="nav-item"> <span class="chapter-number">6️⃣</span> <span class="chapter-title">第六章：交易策略与执行</span> </a> <a href="/007_第七章：投资决策工具与资源" class="nav-item"> <span class="chapter-number">7️⃣</span> <span class="chapter-title">第七章：投资决策工具与资源</span> </a> <a href="/008_第八章：案例复盘与策略改进" class="nav-item"> <span class="chapter-number">8️⃣</span> <span class="chapter-title">第八章：案例复盘与策略改进</span> </a> <a href="/009_第九章：构建投资体系" class="nav-item"> <span class="chapter-number">9️⃣</span> <span class="chapter-title">第九章：构建投资体系</span> </a> <a href="/010_第十章：交易执行与实战指南" class="nav-item"> <span class="chapter-number">🔟</span> <span class="chapter-title">第十章：交易执行与实战指南</span> </a> <a href="/011_附录" class="nav-item"> <span class="chapter-number">📋</span> <span class="chapter-title">附录</span> </a> <a href="/012_策略逻辑" class="nav-item"> <span class="chapter-number">🧠</span> <span class="chapter-title">策略逻辑</span> </a> <a href="/013_示例：加载股票价格数据" class="nav-item"> <span class="chapter-number">📊</span> <span class="chapter-title">示例：加载股票价格数据</span> </a> <a href="/014_示例：计算动量因子" class="nav-item"> <span class="chapter-number">📈</span> <span class="chapter-title">示例：计算动量因子</span> </a> <a href="/015_示例：等权构建组合" class="nav-item"> <span class="chapter-number">⚖️</span> <span class="chapter-title">示例：等权构建组合</span> </a> <a href="/016_示例：回测收益曲线" class="nav-item"> <span class="chapter-number">📉</span> <span class="chapter-title">示例：回测收益曲线</span> </a> <a href="/017_使用 scipy.optimize 进行优化" class="nav-item"> <span class="chapter-number">🔧</span> <span class="chapter-title">使用 scipy.optimize 进行优化</span> </a> </nav> </aside> <!-- 主内容区 --> <main class="main-content"> <div class="top-nav">
  <a href="/">← 返回目录</a>
  <a href="/">返回目录</a>
</div>
<h1 id="使用-scipyoptimize-进行优化">使用 scipy.optimize 进行优化</h1>
<!-- 图表占位：[使用 scipy.optimize 进行优化] -->
<h2 id="概述">概述</h2>
<p>scipy.optimize 是 Python 中强大的优化库，在量化投资中常用于投资组合优化、参数调优等场景。</p>
<h2 id="主要功能">主要功能</h2>
<h3 id="1-投资组合优化">1. 投资组合优化</h3>
<p>使用 scipy.optimize 可以优化投资组合权重，最大化夏普比率或最小化风险。</p>
<h3 id="2-参数优化">2. 参数优化</h3>
<p>通过循环测试不同参数（如止损点、买入条件），选择最优策略。</p>
<h3 id="3-机器学习模型调优">3. 机器学习模型调优</h3>
<p>优化机器学习模型的超参数，提升预测准确性。</p>
<h2 id="示例代码">示例代码</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> scipy.optimize </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> optimize</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> numpy </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> np</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># 投资组合优化示例</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> portfolio_optimization</span><span style="color:#E1E4E8">(returns, risk_free_rate</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0.02</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">    n_assets </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> returns.shape[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # 约束条件：权重和为1</span></span>
<span class="line"><span style="color:#E1E4E8">    constraints </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ({</span><span style="color:#9ECBFF">'type'</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'eq'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'fun'</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">lambda</span><span style="color:#E1E4E8"> x: np.sum(x) </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # 边界条件：权重在0-1之间</span></span>
<span class="line"><span style="color:#E1E4E8">    bounds </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> tuple</span><span style="color:#E1E4E8">((</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> asset </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(n_assets))</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # 初始权重</span></span>
<span class="line"><span style="color:#E1E4E8">    initial_weights </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> np.array([</span><span style="color:#79B8FF">1</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">n_assets] </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> n_assets)</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # 优化目标：最大化夏普比率</span></span>
<span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> objective</span><span style="color:#E1E4E8">(weights):</span></span>
<span class="line"><span style="color:#E1E4E8">        portfolio_return </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> np.sum(returns.mean() </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> weights)</span></span>
<span class="line"><span style="color:#E1E4E8">        portfolio_vol </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> np.sqrt(np.dot(weights.T, np.dot(returns.cov(), weights)))</span></span>
<span class="line"><span style="color:#E1E4E8">        sharpe_ratio </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (portfolio_return </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> risk_free_rate) </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> portfolio_vol</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8">sharpe_ratio  </span><span style="color:#6A737D"># 最小化负夏普比率</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # 执行优化</span></span>
<span class="line"><span style="color:#E1E4E8">    result </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> optimize.minimize(objective, initial_weights, </span></span>
<span class="line"><span style="color:#FFAB70">                             method</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'SLSQP'</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">bounds</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">bounds, </span></span>
<span class="line"><span style="color:#FFAB70">                             constraints</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">constraints)</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> result.x</span></span></code></pre>
<h2 id="应用场景">应用场景</h2>
<ol>
<li><strong>投资组合优化</strong>：优化资产配置权重</li>
<li><strong>策略参数调优</strong>：优化交易策略参数</li>
<li><strong>风险管理</strong>：优化止损止盈参数</li>
<li><strong>机器学习</strong>：优化模型超参数</li>
</ol>
<div class="nav-links">
  <a href="/">← 返回目录</a>
  <a href="/">返回目录</a>
</div>  </main> <!-- 新的回到顶部按钮，悬浮在右下角 --> <button id="backToTop" class="back-to-top" aria-label="回到顶部" style="display:none;">↑</button> </div>  <script type="module">const m=document.getElementById("sidebarToggle"),i=document.getElementById("sidebar");m?.addEventListener("click",()=>{i?.classList.toggle("open")});document.addEventListener("click",t=>{const e=t.target;i&&m&&e&&!i.contains(e)&&!m.contains(e)&&i.classList.remove("open")});const u=document.getElementById("themeToggle"),l=u?.querySelector(".theme-icon"),f=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",f);l&&(l.textContent=f==="dark"?"☀️":"🌙");u?.addEventListener("click",()=>{const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),l&&(l.textContent=e==="dark"?"☀️":"🌙")});const c=document.getElementById("toggleReadingMode");let s=localStorage.getItem("focusMode")==="true";s&&c&&(document.body.classList.add("focus-mode"),c.textContent="📚",c.title="退出专注模式");c?.addEventListener("click",()=>{if(document.body.classList.toggle("focus-mode"),s=document.body.classList.contains("focus-mode"),c&&(c.textContent=s?"📚":"📖",c.title=s?"退出专注模式":"专注阅读模式"),localStorage.setItem("focusMode",s.toString()),s){const t=document.querySelector(".sidebar-toggle"),e=document.querySelector(".font-controls"),n=document.querySelector(".theme-control");t&&t.classList.add("hidden"),e&&e.classList.add("hidden"),n&&n.classList.add("hidden");const d=document.querySelector("main");if(d&&d.scrollIntoView({behavior:"smooth"}),!document.querySelector(".reading-progress")){const a=document.createElement("div");a.className="reading-progress",a.innerHTML='<div class="reading-progress-bar"></div>',document.body.appendChild(a)}g()}else{const t=document.querySelector(".sidebar-toggle"),e=document.querySelector(".font-controls"),n=document.querySelector(".theme-control");t&&t.classList.remove("hidden"),e&&e.classList.remove("hidden"),n&&n.classList.remove("hidden"),document.querySelector(".reading-progress")?.remove(),window.removeEventListener("scroll",g)}});function g(){const t=document.querySelector(".reading-progress-bar");if(!t)return;const e=window.pageYOffset,n=document.documentElement.scrollHeight-window.innerHeight,d=e/n*100;t.style.width=d+"%"}s&&window.addEventListener("scroll",g);const h=document.getElementById("decreaseFont"),y=document.getElementById("increaseFont");let o=parseInt(localStorage.getItem("fontSize")||"16",10);document.body.style.fontSize=o+"px";h?.addEventListener("click",()=>{o>12&&(o-=2,document.body.style.fontSize=o+"px",localStorage.setItem("fontSize",o.toString()))});y?.addEventListener("click",()=>{o<24&&(o+=2,document.body.style.fontSize=o+"px",localStorage.setItem("fontSize",o.toString()))});const r=document.getElementById("backToTop");r&&(window.addEventListener("scroll",()=>{window.scrollY>300?r.style.display="flex":r.style.display="none"}),r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));</script> </body> </html>