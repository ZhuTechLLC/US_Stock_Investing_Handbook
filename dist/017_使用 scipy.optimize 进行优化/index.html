<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="UTF-8"><meta name="description" content="ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒI - é«˜å€è‚¡åˆ†æä¸ç­–ç•¥å®è·µ"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.10.1"><title></title><link rel="stylesheet" href="/_astro/000_åºè¨€.DpT400HY.css"></head> <body> <div class="container"> <!-- å·¦ä¸Šè§’ --> <header class="top-nav"> <div style="display: flex; align-items: center;"> <button class="sidebar-toggle" id="sidebarToggle" aria-label="åˆ‡æ¢ä¾§è¾¹æ ">ğŸ“š</button> </div> <div class="right-buttons"> <button id="toggleReadingMode" class="reading-btn" title="ä¸“æ³¨é˜…è¯»æ¨¡å¼">ğŸ“–</button> <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜"> <span class="theme-icon">ğŸŒ™</span> </button> <button id="decreaseFont" class="font-btn" title="ç¼©å°å­—ä½“">A-</button> <button id="increaseFont" class="font-btn" title="æ”¾å¤§å­—ä½“">A+</button> <a class="lang-btn" id="langSwitchEn" title="English">EN</a> <a class="lang-btn" id="langSwitchCn" title="ä¸­æ–‡">CN</a> </div> </header> <!-- ä¾§è¾¹æ  --> <aside class="sidebar" id="sidebar"> <div class="sidebar-header"> <h2>ğŸ“ˆ ç¾è‚¡æŠ•èµ„å®æ“æ‰‹å†ŒI</h2> </div> <nav class="sidebar-nav"> <a href="/" class="nav-item"> <span class="chapter-number">ğŸ </span> <span class="chapter-title">é¦–é¡µ</span> </a> <a href="/000_åºè¨€" class="nav-item"> <span class="chapter-number">ğŸ“–</span> <span class="chapter-title">åºè¨€</span> </a> <a href="/001_ç¬¬ä¸€ç« ï¼šçœ‹æ¸…è‡ªå·±ï¼Œçœ‹æ‡‚ä¸–ç•Œâ€”â€”æŠ•èµ„çš„è®¤çŸ¥èµ·ç‚¹" class="nav-item"> <span class="chapter-number">1ï¸âƒ£</span> <span class="chapter-title">ç¬¬ä¸€ç« ï¼šæŠ•èµ„è®¤çŸ¥èµ·ç‚¹</span> </a> <a href="/002_ç¬¬äºŒç« ï¼šæŠ•èµ„å¿ƒç†ä¸é£é™©ç®¡ç†" class="nav-item"> <span class="chapter-number">2ï¸âƒ£</span> <span class="chapter-title">ç¬¬äºŒç« ï¼šæŠ•èµ„å¿ƒç†ä¸é£é™©ç®¡ç†</span> </a> <a href="/003_ç¬¬ä¸‰ç« ï¼šå†å²è§„å¾‹ä¸é«˜å€è‚¡ç ”ç©¶" class="nav-item"> <span class="chapter-number">3ï¸âƒ£</span> <span class="chapter-title">ç¬¬ä¸‰ç« ï¼šå†å²è§„å¾‹ä¸é«˜å€è‚¡ç ”ç©¶</span> </a> <a href="/004_ç¬¬å››ç« ï¼šèµ›é“é€‰æ‹©ä¸è¡Œä¸šè¶‹åŠ¿" class="nav-item"> <span class="chapter-number">4ï¸âƒ£</span> <span class="chapter-title">ç¬¬å››ç« ï¼šèµ›é“é€‰æ‹©ä¸è¡Œä¸šè¶‹åŠ¿</span> </a> <a href="/005_ç¬¬äº”ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥" class="nav-item"> <span class="chapter-number">5ï¸âƒ£</span> <span class="chapter-title">ç¬¬äº”ç« ï¼šè‚¡ç¥¨ç­›é€‰ç­–ç•¥</span> </a> <a href="/006_ç¬¬å…­ç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ" class="nav-item"> <span class="chapter-number">6ï¸âƒ£</span> <span class="chapter-title">ç¬¬å…­ç« ï¼šäº¤æ˜“ç­–ç•¥ä¸æ‰§è¡Œ</span> </a> <a href="/007_ç¬¬ä¸ƒç« ï¼šæŠ•èµ„å†³ç­–å·¥å…·ä¸èµ„æº" class="nav-item"> <span class="chapter-number">7ï¸âƒ£</span> <span class="chapter-title">ç¬¬ä¸ƒç« ï¼šæŠ•èµ„å†³ç­–å·¥å…·ä¸èµ„æº</span> </a> <a href="/008_ç¬¬å…«ç« ï¼šæ¡ˆä¾‹å¤ç›˜ä¸ç­–ç•¥æ”¹è¿›" class="nav-item"> <span class="chapter-number">8ï¸âƒ£</span> <span class="chapter-title">ç¬¬å…«ç« ï¼šæ¡ˆä¾‹å¤ç›˜ä¸ç­–ç•¥æ”¹è¿›</span> </a> <a href="/009_ç¬¬ä¹ç« ï¼šæ„å»ºæŠ•èµ„ä½“ç³»" class="nav-item"> <span class="chapter-number">9ï¸âƒ£</span> <span class="chapter-title">ç¬¬ä¹ç« ï¼šæ„å»ºæŠ•èµ„ä½“ç³»</span> </a> <a href="/010_ç¬¬åç« ï¼šäº¤æ˜“æ‰§è¡Œä¸å®æˆ˜æŒ‡å—" class="nav-item"> <span class="chapter-number">ğŸ”Ÿ</span> <span class="chapter-title">ç¬¬åç« ï¼šäº¤æ˜“æ‰§è¡Œä¸å®æˆ˜æŒ‡å—</span> </a> <a href="/011_é™„å½•" class="nav-item"> <span class="chapter-number">ğŸ“‹</span> <span class="chapter-title">é™„å½•</span> </a> <a href="/012_ç­–ç•¥é€»è¾‘" class="nav-item"> <span class="chapter-number">ğŸ§ </span> <span class="chapter-title">ç­–ç•¥é€»è¾‘</span> </a> <a href="/013_ç¤ºä¾‹ï¼šåŠ è½½è‚¡ç¥¨ä»·æ ¼æ•°æ®" class="nav-item"> <span class="chapter-number">ğŸ“Š</span> <span class="chapter-title">ç¤ºä¾‹ï¼šåŠ è½½è‚¡ç¥¨ä»·æ ¼æ•°æ®</span> </a> <a href="/014_ç¤ºä¾‹ï¼šè®¡ç®—åŠ¨é‡å› å­" class="nav-item"> <span class="chapter-number">ğŸ“ˆ</span> <span class="chapter-title">ç¤ºä¾‹ï¼šè®¡ç®—åŠ¨é‡å› å­</span> </a> <a href="/015_ç¤ºä¾‹ï¼šç­‰æƒæ„å»ºç»„åˆ" class="nav-item"> <span class="chapter-number">âš–ï¸</span> <span class="chapter-title">ç¤ºä¾‹ï¼šç­‰æƒæ„å»ºç»„åˆ</span> </a> <a href="/016_ç¤ºä¾‹ï¼šå›æµ‹æ”¶ç›Šæ›²çº¿" class="nav-item"> <span class="chapter-number">ğŸ“‰</span> <span class="chapter-title">ç¤ºä¾‹ï¼šå›æµ‹æ”¶ç›Šæ›²çº¿</span> </a> <a href="/017_ä½¿ç”¨ scipy.optimize è¿›è¡Œä¼˜åŒ–" class="nav-item"> <span class="chapter-number">ğŸ”§</span> <span class="chapter-title">ä½¿ç”¨ scipy.optimize è¿›è¡Œä¼˜åŒ–</span> </a> </nav> </aside> <!-- ä¸»å†…å®¹åŒº --> <main class="main-content"> <div class="top-nav">
  <a href="/">â† è¿”å›ç›®å½•</a>
  <a href="/">è¿”å›ç›®å½•</a>
</div>
<h1 id="ä½¿ç”¨-scipyoptimize-è¿›è¡Œä¼˜åŒ–">ä½¿ç”¨ scipy.optimize è¿›è¡Œä¼˜åŒ–</h1>
<!-- å›¾è¡¨å ä½ï¼š[ä½¿ç”¨ scipy.optimize è¿›è¡Œä¼˜åŒ–] -->
<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>scipy.optimize æ˜¯ Python ä¸­å¼ºå¤§çš„ä¼˜åŒ–åº“ï¼Œåœ¨é‡åŒ–æŠ•èµ„ä¸­å¸¸ç”¨äºæŠ•èµ„ç»„åˆä¼˜åŒ–ã€å‚æ•°è°ƒä¼˜ç­‰åœºæ™¯ã€‚</p>
<h2 id="ä¸»è¦åŠŸèƒ½">ä¸»è¦åŠŸèƒ½</h2>
<h3 id="1-æŠ•èµ„ç»„åˆä¼˜åŒ–">1. æŠ•èµ„ç»„åˆä¼˜åŒ–</h3>
<p>ä½¿ç”¨ scipy.optimize å¯ä»¥ä¼˜åŒ–æŠ•èµ„ç»„åˆæƒé‡ï¼Œæœ€å¤§åŒ–å¤æ™®æ¯”ç‡æˆ–æœ€å°åŒ–é£é™©ã€‚</p>
<h3 id="2-å‚æ•°ä¼˜åŒ–">2. å‚æ•°ä¼˜åŒ–</h3>
<p>é€šè¿‡å¾ªç¯æµ‹è¯•ä¸åŒå‚æ•°ï¼ˆå¦‚æ­¢æŸç‚¹ã€ä¹°å…¥æ¡ä»¶ï¼‰ï¼Œé€‰æ‹©æœ€ä¼˜ç­–ç•¥ã€‚</p>
<h3 id="3-æœºå™¨å­¦ä¹ æ¨¡å‹è°ƒä¼˜">3. æœºå™¨å­¦ä¹ æ¨¡å‹è°ƒä¼˜</h3>
<p>ä¼˜åŒ–æœºå™¨å­¦ä¹ æ¨¡å‹çš„è¶…å‚æ•°ï¼Œæå‡é¢„æµ‹å‡†ç¡®æ€§ã€‚</p>
<h2 id="ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> scipy.optimize </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> optimize</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> numpy </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> np</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># æŠ•èµ„ç»„åˆä¼˜åŒ–ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> portfolio_optimization</span><span style="color:#E1E4E8">(returns, risk_free_rate</span><span style="color:#F97583">=</span><span style="color:#79B8FF">0.02</span><span style="color:#E1E4E8">):</span></span>
<span class="line"><span style="color:#E1E4E8">    n_assets </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> returns.shape[</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # çº¦æŸæ¡ä»¶ï¼šæƒé‡å’Œä¸º1</span></span>
<span class="line"><span style="color:#E1E4E8">    constraints </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ({</span><span style="color:#9ECBFF">'type'</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'eq'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'fun'</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">lambda</span><span style="color:#E1E4E8"> x: np.sum(x) </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # è¾¹ç•Œæ¡ä»¶ï¼šæƒé‡åœ¨0-1ä¹‹é—´</span></span>
<span class="line"><span style="color:#E1E4E8">    bounds </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> tuple</span><span style="color:#E1E4E8">((</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> asset </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> range</span><span style="color:#E1E4E8">(n_assets))</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # åˆå§‹æƒé‡</span></span>
<span class="line"><span style="color:#E1E4E8">    initial_weights </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> np.array([</span><span style="color:#79B8FF">1</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">n_assets] </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> n_assets)</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # ä¼˜åŒ–ç›®æ ‡ï¼šæœ€å¤§åŒ–å¤æ™®æ¯”ç‡</span></span>
<span class="line"><span style="color:#F97583">    def</span><span style="color:#B392F0"> objective</span><span style="color:#E1E4E8">(weights):</span></span>
<span class="line"><span style="color:#E1E4E8">        portfolio_return </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> np.sum(returns.mean() </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> weights)</span></span>
<span class="line"><span style="color:#E1E4E8">        portfolio_vol </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> np.sqrt(np.dot(weights.T, np.dot(returns.cov(), weights)))</span></span>
<span class="line"><span style="color:#E1E4E8">        sharpe_ratio </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (portfolio_return </span><span style="color:#F97583">-</span><span style="color:#E1E4E8"> risk_free_rate) </span><span style="color:#F97583">/</span><span style="color:#E1E4E8"> portfolio_vol</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8">sharpe_ratio  </span><span style="color:#6A737D"># æœ€å°åŒ–è´Ÿå¤æ™®æ¯”ç‡</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    # æ‰§è¡Œä¼˜åŒ–</span></span>
<span class="line"><span style="color:#E1E4E8">    result </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> optimize.minimize(objective, initial_weights, </span></span>
<span class="line"><span style="color:#FFAB70">                             method</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">'SLSQP'</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">bounds</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">bounds, </span></span>
<span class="line"><span style="color:#FFAB70">                             constraints</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">constraints)</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> result.x</span></span></code></pre>
<h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2>
<ol>
<li><strong>æŠ•èµ„ç»„åˆä¼˜åŒ–</strong>ï¼šä¼˜åŒ–èµ„äº§é…ç½®æƒé‡</li>
<li><strong>ç­–ç•¥å‚æ•°è°ƒä¼˜</strong>ï¼šä¼˜åŒ–äº¤æ˜“ç­–ç•¥å‚æ•°</li>
<li><strong>é£é™©ç®¡ç†</strong>ï¼šä¼˜åŒ–æ­¢æŸæ­¢ç›ˆå‚æ•°</li>
<li><strong>æœºå™¨å­¦ä¹ </strong>ï¼šä¼˜åŒ–æ¨¡å‹è¶…å‚æ•°</li>
</ol>
<div class="nav-links">
  <a href="/">â† è¿”å›ç›®å½•</a>
  <a href="/">è¿”å›ç›®å½•</a>
</div>  </main> <!-- æ–°çš„å›åˆ°é¡¶éƒ¨æŒ‰é’®ï¼Œæ‚¬æµ®åœ¨å³ä¸‹è§’ --> <button id="backToTop" class="back-to-top" aria-label="å›åˆ°é¡¶éƒ¨" style="display:none;">â†‘</button> </div>  <script type="module">const m=document.getElementById("sidebarToggle"),i=document.getElementById("sidebar");m?.addEventListener("click",()=>{i?.classList.toggle("open")});document.addEventListener("click",t=>{const e=t.target;i&&m&&e&&!i.contains(e)&&!m.contains(e)&&i.classList.remove("open")});const u=document.getElementById("themeToggle"),l=u?.querySelector(".theme-icon"),f=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",f);l&&(l.textContent=f==="dark"?"â˜€ï¸":"ğŸŒ™");u?.addEventListener("click",()=>{const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),l&&(l.textContent=e==="dark"?"â˜€ï¸":"ğŸŒ™")});const c=document.getElementById("toggleReadingMode");let s=localStorage.getItem("focusMode")==="true";s&&c&&(document.body.classList.add("focus-mode"),c.textContent="ğŸ“š",c.title="é€€å‡ºä¸“æ³¨æ¨¡å¼");c?.addEventListener("click",()=>{if(document.body.classList.toggle("focus-mode"),s=document.body.classList.contains("focus-mode"),c&&(c.textContent=s?"ğŸ“š":"ğŸ“–",c.title=s?"é€€å‡ºä¸“æ³¨æ¨¡å¼":"ä¸“æ³¨é˜…è¯»æ¨¡å¼"),localStorage.setItem("focusMode",s.toString()),s){const t=document.querySelector(".sidebar-toggle"),e=document.querySelector(".font-controls"),n=document.querySelector(".theme-control");t&&t.classList.add("hidden"),e&&e.classList.add("hidden"),n&&n.classList.add("hidden");const d=document.querySelector("main");if(d&&d.scrollIntoView({behavior:"smooth"}),!document.querySelector(".reading-progress")){const a=document.createElement("div");a.className="reading-progress",a.innerHTML='<div class="reading-progress-bar"></div>',document.body.appendChild(a)}g()}else{const t=document.querySelector(".sidebar-toggle"),e=document.querySelector(".font-controls"),n=document.querySelector(".theme-control");t&&t.classList.remove("hidden"),e&&e.classList.remove("hidden"),n&&n.classList.remove("hidden"),document.querySelector(".reading-progress")?.remove(),window.removeEventListener("scroll",g)}});function g(){const t=document.querySelector(".reading-progress-bar");if(!t)return;const e=window.pageYOffset,n=document.documentElement.scrollHeight-window.innerHeight,d=e/n*100;t.style.width=d+"%"}s&&window.addEventListener("scroll",g);const h=document.getElementById("decreaseFont"),y=document.getElementById("increaseFont");let o=parseInt(localStorage.getItem("fontSize")||"16",10);document.body.style.fontSize=o+"px";h?.addEventListener("click",()=>{o>12&&(o-=2,document.body.style.fontSize=o+"px",localStorage.setItem("fontSize",o.toString()))});y?.addEventListener("click",()=>{o<24&&(o+=2,document.body.style.fontSize=o+"px",localStorage.setItem("fontSize",o.toString()))});const r=document.getElementById("backToTop");r&&(window.addEventListener("scroll",()=>{window.scrollY>300?r.style.display="flex":r.style.display="none"}),r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));</script> </body> </html>